@if (active.system(); as system) {

  <mat-card class="mt-5 mb-5">

    <div class="flex flex-row justify-between p-5">
      <div>
        <h1 class="text-2xl font-bold mb-2">{{ system.name }}</h1>
        <p>{{ system.description }}</p>
      </div>
      
      <common-fab-button [icon]="'edit'" (buttonChange)="onEditPattern()"></common-fab-button>
    </div>

  
    <mat-divider/>

    <div class="flex flex-col p-5">
      <h2 class="text-2xl font-bold pb-5">Parts:</h2>
      <div class="flex flex-col w-full pl-5">
        @for (part of system.parts; track $index) {
          <patterns-data-system-part class="w-full" [part]="part" [view]="'simple'"/>
        }
      </div>
    </div>

  </mat-card>

  @if (system.hasSiblings) {
    <div class="flex flex-row justify-end">
      <common-fab-button [text]="'Add Sibling'" [icon]="'call_split'" (buttonChange)="onAddSiblingChange()"/>
    </div>
  }

  @if (patternData(); as pdata) {
    <div class="pb-5">

      <patterns-data-display
        [data]="pdata"
        (addChange)="onAddChange($event)"
        (titleChange)="onTitleChange($event)"
        (updateChange)="onUpdateChange($event)"
        (removeChange)="onRemoveChange($event)"
        (generateChange)="onGenerateChange($event)"/>

    </div>
  }

}